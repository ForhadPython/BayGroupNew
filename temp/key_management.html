{% extends 'base.html'%}
{% load static %}
{% block content %}
<style>
body { background: #fff !important; }

/* Menu color fix */
#header .navmenu ul li a { color: #000 !important; }

/* Modern Popup Design */
.modal-content {
    border-radius: 22px !important;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(12px);
    box-shadow: 0 12px 45px rgba(0, 0, 0, 0.25);
    animation: popupZoom 0.25s ease-out;
}

@keyframes popupZoom {
    0% { transform: scale(0.85); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.modal-header {
    border-bottom: none !important;
    padding: 20px 30px !important;
}

.modal-title {
    font-size: 24px;
    font-weight: 700;
    color: #222;
}

.modal-body {
    padding: 35px;
}

/* Responsive content wrapper */
.member-desc-wrapper {
    display: flex;
    gap: 30px;
    flex-wrap: wrap;
    align-items: flex-start;
}

.member-desc-wrapper img {
    border-radius: 15px;
    max-width: 260px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.member-desc-text {
    flex: 1;
    min-width: 240px;
}

/* Better Close Button */
.btn-close {
    filter: brightness(0);
    transform: scale(1.2);
}

@media(max-width: 768px){
  .modal-body { padding: 25px; }
  .modal-content { border-radius: 18px !important; }
}
</style>

<main class="main" style="margin-top: 8%;">

  <!-- Team Section -->
  <section id="team" class="team section light-background">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
        <h2>{{ key_management_headline.title }}</h2>
        <p>{{ key_management_headline.description|safe }}</p>
    </div>

    <div class="container">
      <div class="row gy-5">

        {% for member in team_members %}
        <div class="col-lg-4 col-md-6 member" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:1 }}00">

          <div class="member-img">
            {% if member.image %}
              <img src="{{ member.image.url }}" class="img-fluid" alt="{{ member.name }}">
            {% else %}
              <img src="{% static 'assets/img/team/default.jpg' %}" class="img-fluid" alt="No Image">
            {% endif %}
            <div class="social">
              {% if member.link %}
                <a href="{{ member.link }}" target="_blank"><i class="bi bi-link-45deg"></i></a>
              {% else %}
                <a href="#"><i class="bi bi-person"></i></a>
              {% endif %}
            </div>
          </div>

          <div class="member-info text-center">
            <h4>{{ member.name }}</h4>
            <span>{{ member.designation|safe }}</span>

            {% if member.description %}
              <p>{{ member.description|striptags|truncatewords:20 }}</p>
              <!-- MODERN POPUP BUTTON -->
              <button class="btn btn-sm mt-2"
                      style="background:#C62828; color:white; border-radius:8px; padding:7px 18px; font-weight:600;"
                      data-bs-toggle="modal"
                      data-bs-target="#fullscreenModal{{ member.id }}">
                See More
              </button>
            {% endif %}
          </div>

        </div>

        <!-- MODERN POPUP -->
        <div class="modal fade" id="fullscreenModal{{ member.id }}" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

              <div class="modal-header">
                <h5 class="modal-title">{{ member.name }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>

              <div class="modal-body">

                <div class="member-desc-wrapper">

                  <!-- Image -->
                  {% if member.image %}
                    <img src="{{ member.image.url }}" alt="">
                  {% else %}
                    <img src="{% static 'assets/img/team/default.jpg' %}" alt="">
                  {% endif %}

                  <!-- Text -->
                  <div class="member-desc-text">
                    <h5 style="font-weight:700; margin-bottom:10px;">{{ member.designation|safe }}</h5>

                    <p style="text-align:justify; font-size:16px; line-height:1.8;">
                      {{ member.description|safe }}
                    </p>
                  </div>

                </div>

              </div>

            </div>
          </div>
        </div>
        <!-- END POPUP -->

        {% empty %}
          <div class="text-center">
            <p>No key management members available at this time.</p>
          </div>
        {% endfor %}

      </div>
    </div>

  </section>

</main>
<br/><br/>
{% endblock %}
